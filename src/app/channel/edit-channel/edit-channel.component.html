<app-topbar [header]="header"></app-topbar>
<section>
    <div class="card">
        <form [formGroup]="channelDetailsForm">
            <div class="form-group">
                <div class="row">
                    <label>Pull Sources</label>
                    <div class="col-md-11">
                        <input type="text" formControlName="pullSource" class="form-control form-control-lg" placeholder="Pull Sources" [ngClass]="{ 'is-invalid': submitted && f.pullSource.errors }">
                        <div *ngIf="submitted && f?.pullSource?.errors" class="form-text text-danger">
                            <div *ngIf="f.pullSource.errors?.required">Pull Sources is required!</div>
                            <!-- <div *ngIf="f.pullSource.errors?.minlength">Pull Sources must be at least 6 character is required!</div>
                            <div *ngIf="f.pullSource.errors?.maxlength">Pull Sources must be max 20 character is required!</div> -->
                        </div>
                    </div>
                    <div class="icons col-md-1">
                        <i class="fas fa-plus" (click)="openinfo(add)"></i>
                        <i class="fas fa-trash" (click)="deletePullSource()"></i>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label>Channel Name</label>
                <input type="text" formControlName="channelName" class="form-control form-control-lg" placeholder="Channel Name" [ngClass]="{ 'is-invalid': submitted && f.channelName.errors }">
                <div *ngIf="submitted && f?.channelName?.errors" class="form-text text-danger">
                    <div *ngIf="f.channelName.errors?.required">Channel Name is required!</div>
                    <div *ngIf="f.channelName.errors?.minlength">Channel Name must be at least 6 character is required!</div>
                    <div *ngIf="f.channelName.errors?.maxlength">Channel Name must be max 20 character is required!</div>
                </div>
            </div>
            <div class="form-group">
                <label>Password</label>
                <input type="password" formControlName="password" class="form-control form-control-lg" placeholder="********" [ngClass]="{ 'is-invalid': submitted && f.password.errors }">
                <div *ngIf="submitted && f.password.errors" class="form-text text-danger">
                    <div *ngIf="f.password.errors?.required">Password is required!</div>
                    <!-- <div *ngIf="f.password.errors?.minlength">Password must be at least 6 character is required!</div>
            <div *ngIf="f.password.errors?.maxlength">Password must be max 20 character is required!</div> -->
                </div>
            </div>
            <div class="form-group">
                <label class="pr-4 mt-3 "><b>Secure</b> </label>
                <ui-switch size='small' class="pt-5" [checked]="secure" formControlName="securePlay"></ui-switch>
                <div *ngIf="channelDetailsForm?.get('secure')?.value">
                    <input type="date" pattern="dd/mm/yyyy" class="form-control form-control-lg" formControlName="playerCountDown" placeholder="dd-mm-yyyy" />
                </div>
            </div>
            <div class="form-group">
                <label class="pr-4 pt-0"><b>Player Countdown</b></label>
                <ui-switch size='small' [checked]="playerCount" (change)="onChangePlayerCount($event)"></ui-switch>
                <div *ngIf="false">
                    <input type="date" pattern="dd/mm/yyyy" class="form-control form-control-lg" formControlName="playerCountDown" placeholder="dd-mm-yyyy" />
                </div>
            </div>
            <div class="form-group">
                <button (click)="OnUpdateChannel()" style="color: white;text-align:center" class=" mr-4 buton">Save</button>
                <button (click)="OnDeleteChannel($event)" style="color: red;text-align:center" class="buton1">Delete</button>
            </div>
        </form>
    </div>
</section>
<ng-template #add let-c="close" let-d="dismiss">
   <div class="mainn">
    <h4>Add A New Source To Pull From</h4>
    <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
      <span class="cls"> <i class="fa fa-times" aria-hidden="true"></i> </span>
    </button>
    <section>
        <p>Note! Please enter the RTMP URL and Channel name of an existing playable live RTMP stream that is currently live <span> on a different server.</span> </p>
        <form>
            <div class="form-group">
                <label><b>Pull From Sources (RTMP & HLS)</b></label>
                <input type="text" formControlName="channelName" class="form-control form-control-lg" placeholder="Enter Preset Name" [ngClass]="{ 'is-invalid': submitted && f.channelName.errors }">
                <div *ngIf="submitted && f?.channelName?.errors" class="form-text text-danger">
                    <div *ngIf="f.channelName.errors?.required">Channel Name is required!</div>
                    <div *ngIf="f.channelName.errors?.minlength">Channel Name must be at least 6 character is required!</div>
                    <div *ngIf="f.channelName.errors?.maxlength">Channel Name must be max 20 character is required!</div>
                </div>
            </div>
            <div class="form-group">
                <button (click)="onAddPullSource()" style="color: white;text-align:center" class="buton">Submit</button>
                <!-- <button (click)="addPreset()" style="color: white;text-align:center" class="buton">Update</button> -->
            </div>
        </form>
  